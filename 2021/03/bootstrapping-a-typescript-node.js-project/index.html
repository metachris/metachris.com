<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Chris Hager"><meta name=description content="This is a guide for bootstrapping a minimal TypeScript + Node.js project with modern tooling (March 2021).
 TypeScript 4, optionally esbuild Linting with typescript-eslint (tslint is deprecated) Tests with Jest (and ts-jest) CI for testing and linting (GitHub Actions / GitLab CI) Automatic API documentation with typedoc  Example repository: github.com/metachris/typescript-nodejs-boilerplate
You can either clone the example repository or follow the individual steps outlined in this post.
 Notes:"><meta name=keywords content="TypeScript,Node.js,Project,Setup,Template,Boilerplate"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.metachris.com/images/posts/typescript-nodejs.jpg"><meta name=twitter:title content="Bootstrapping a TypeScript + Node.js Project"><meta name=twitter:description content="This is a guide for bootstrapping a minimal TypeScript + Node.js project with modern tooling (March 2021).
 TypeScript 4, optionally esbuild Linting with typescript-eslint (tslint is deprecated) Tests with Jest (and ts-jest) CI for testing and linting (GitHub Actions / GitLab CI) Automatic API documentation with typedoc  Example repository: github.com/metachris/typescript-nodejs-boilerplate
You can either clone the example repository or follow the individual steps outlined in this post.
 Notes:"><meta property="og:title" content="Bootstrapping a TypeScript + Node.js Project"><meta property="og:description" content="This is a guide for bootstrapping a minimal TypeScript + Node.js project with modern tooling (March 2021).
 TypeScript 4, optionally esbuild Linting with typescript-eslint (tslint is deprecated) Tests with Jest (and ts-jest) CI for testing and linting (GitHub Actions / GitLab CI) Automatic API documentation with typedoc  Example repository: github.com/metachris/typescript-nodejs-boilerplate
You can either clone the example repository or follow the individual steps outlined in this post.
 Notes:"><meta property="og:type" content="article"><meta property="og:url" content="https://www.metachris.com/2021/03/bootstrapping-a-typescript-node.js-project/"><meta property="og:image" content="https://www.metachris.com/images/posts/typescript-nodejs.jpg"><meta property="article:published_time" content="2021-03-24T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-24T00:00:00+00:00"><base href=https://www.metachris.com/2021/03/bootstrapping-a-typescript-node.js-project/><title>Bootstrapping a TypeScript + Node.js Project · Chris Hager</title><link rel=canonical href=https://www.metachris.com/2021/03/bootstrapping-a-typescript-node.js-project/><link rel=stylesheet href=https://www.metachris.com/css/normalize.min.css><link rel=stylesheet href=https://www.metachris.com/css/coder.min.289c3973f873a44b2356dd2eeae46bdf6eb9576973b762fb71fe125918485af4.css integrity="sha256-KJw5c/hzpEsjVt0u6uRr3265V2lzt2L7cf4SWRhIWvQ=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://www.metachris.com/css/coder-dark.min.5d88e189a7c453021544d4cd4bed96166f53dd106dddf20093d615ebe92a32e5.css integrity="sha256-XYjhiafEUwIVRNTNS+2WFm9T3RBt3fIAk9YV6+kqMuU=" crossorigin=anonymous media=screen><script src=https://www.metachris.com/js/custom.js></script><link rel=stylesheet href=https://www.metachris.com/scss/custom.min.bab19fc33a8af824356124275c8cfad53050fc7dbaed5b6dc1ec74a5c2fb82a4.css integrity="sha256-urGfwzqK+CQ1YSQnXIz61TBQ/H267Vttwex0pcL7gqQ=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://www.metachris.com/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://www.metachris.com/images/favicon-16x16.png sizes=16x16><link rel=alternate type=application/rss+xml href=https://www.metachris.comindex.xml title="Site Title"></head><body class=colorscheme-auto><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://www.metachris.com/>Chris Hager</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars"></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://www.metachris.com/about/>About</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.com/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.com/projects/>Projects</a></li><li class=navigation-item><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw"></i></a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>Bootstrapping a TypeScript + Node.js Project</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fas fa-calendar"></i><time datetime=2021-03-24T00:00:00Z>March 24, 2021</time></span>
<span class=reading-time><i class="fas fa-clock"></i>4 minutes read</span></div><div class=tags><i class="fas fa-tag"></i><a href=https://www.metachris.com/tags/typescript/>TypeScript</a>
<span class=separator>•</span>
<a href=https://www.metachris.com/tags/webdev/>webdev</a></div></div></header><div><p>This is a guide for bootstrapping a minimal TypeScript + Node.js project with modern tooling (March 2021).</p><ul><li>TypeScript 4, optionally <a href=https://esbuild.github.io/>esbuild</a></li><li>Linting with <a href=https://github.com/typescript-eslint/typescript-eslint>typescript-eslint</a> (<a href=https://palantir.github.io/tslint/>tslint</a> is deprecated)</li><li>Tests with <a href=https://jestjs.io/docs/getting-started>Jest</a> (and <a href=https://www.npmjs.com/package/ts-jest>ts-jest</a>)</li><li>CI for testing and linting (<a href=https://docs.github.com/en/actions>GitHub Actions</a> / <a href=https://docs.gitlab.com/ee/ci/>GitLab CI</a>)</li><li>Automatic API documentation with <a href=https://typedoc.org/guides/doccomments/>typedoc</a></li></ul><div class=infobox1><p>Example repository: <a href=https://github.com/metachris/typescript-nodejs-boilerplate>github.com/metachris/typescript-nodejs-boilerplate</a></p><p>You can either clone the example repository or follow the individual steps outlined in this post.</p></div><p>Notes:</p><ul><li>To bootstrap a web project, you probably want to use a template with hot code reloading specific for web projects. I&rsquo;ll write another post that covers this soon. In the meantime, see the <a href=https://webpack.js.org/guides/hot-module-replacement/>webpack hot reload docs</a>.</li><li>There are a couple of gotchas for projects that target
both Node.js and web, since several APIs and available libraries are different (eg. fetch, websockets, Buffer, etc.).</li></ul><hr><h2 id=steps>Steps</h2><ol><li>Create a project and source directory</li><li>Create a <code>package.json</code></li><li>Get a <code>.gitignore</code>, <code>tsconfig.json</code>, <code>tslint.json</code></li><li>Install TypeScript & dependencies</li><li>Integrate tests with Jest</li><li>Setup CI tasks</li><li>Optional: API documentation with typedoc</li><li>Optional: esbuild</li><li><a href=https://opensource.guide/legal/#which-open-source-license-is-appropriate-for-my-project>Choose a license</a></li></ol><hr><h2 id=basic-project-setup>Basic project setup</h2><p>Create the directories and install the primary dependencies. These steps use <code>yarn</code>, but you
can also substitute it with <code>npm</code> if you prefer.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Create project folder</span>
mkdir my-project
cd my-project

<span style=color:#75715e># Create source folder and file</span>
mkdir src
touch src/main.ts src/main.test.ts

<span style=color:#75715e># Create a package.json</span>
yarn init

<span style=color:#75715e># Install TypeScript, linter and Jest</span>
yarn add -D typescript @types/node ts-node
yarn add -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
yarn add -D jest ts-jest @types/jest

<span style=color:#75715e># Get a .gitignore</span>
wget https://raw.githubusercontent.com/metachris/typescript-nodejs-boilerplate/master/.gitignore

<span style=color:#75715e># Get a tsconfig.json with some defaults (adapt as needed)</span>
wget https://raw.githubusercontent.com/metachris/typescript-nodejs-boilerplate/master/tsconfig.json

<span style=color:#75715e># Alternatively you can create a fresh tsconfig.json (with extensive docstrings)</span>
tsc --init

<span style=color:#75715e># Get a .eslintrc.js</span>
wget https://raw.githubusercontent.com/metachris/typescript-nodejs-boilerplate/master/.eslintrc.js

<span style=color:#75715e># Get a jest.config.json, for ts-jest to run the tests without a separate typescript compile step</span>
wget https://raw.githubusercontent.com/metachris/typescript-nodejs-boilerplate/master/jest.config.js

<span style=color:#75715e># Create a git repo and make the first commit</span>
git init
git commit -am <span style=color:#e6db74>&#34;initial commit&#34;</span>
</code></pre></div><p>Add <code>scripts</code> to your <code>package.json</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;scripts&#34;</span>: {
        <span style=color:#f92672>&#34;start&#34;</span>: <span style=color:#e6db74>&#34;ts-node src/main.ts&#34;</span>,
        <span style=color:#f92672>&#34;test&#34;</span>: <span style=color:#e6db74>&#34;jest&#34;</span>,
        <span style=color:#f92672>&#34;lint&#34;</span>: <span style=color:#e6db74>&#34;tslint -c tslint.json &#39;src/**/*.ts&#39; &#39;test/**/*.ts&#39;&#34;</span>,
        <span style=color:#f92672>&#34;build&#34;</span>: <span style=color:#e6db74>&#34;tsc -p tsconfig.json&#34;</span>,
        <span style=color:#f92672>&#34;clean&#34;</span>: <span style=color:#e6db74>&#34;rm -rf dist build&#34;</span>,
        <span style=color:#f92672>&#34;ts-node&#34;</span>: <span style=color:#e6db74>&#34;ts-node&#34;</span>
    }
}
</code></pre></div><p>Now you can run <code>yarn run</code>, <code>yarn lint</code>, <code>yarn test</code>, <code>yarn build</code> and <code>yarn ts-node &lt;filename></code>.</p><div class=infobox1><p>💡 In Visual Studio Code you can use the build and test tasks to start scripts with keyboard shortcuts. In the command palette &ldquo;<em>Configure Default Build Task</em>&rdquo; and &ldquo;<em>Configure Default Test Task</em>&rdquo; (see the <a href=https://code.visualstudio.com/docs/editor/tasks>VS Code docs</a>).</p></div><hr><h2 id=tests-with-jest>Tests with Jest</h2><p>You can write <a href=https://jestjs.io/docs/getting-started>Jest tests</a> <a href=https://github.com/metachris/typescript-nodejs-boilerplate/blob/master/src/main.test.ts>like this</a>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>greet</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./main&#39;</span>

<span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;the data is peanut butter&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
  <span style=color:#a6e22e>expect</span>(<span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#ae81ff>1</span>)
});

<span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;greeting&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
  <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>greet</span>(<span style=color:#e6db74>&#39;Foo&#39;</span>)).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;Hello Foo&#39;</span>)
});
</code></pre></div><p>Run the tests with <code>yarn test</code>. No separate compile step is necessary.</p><p>See also:</p><ul><li><a href=https://jestjs.io/docs/getting-started>Jest documentation</a></li></ul><hr><h2 id=continuous-integration-github-actions--gitlab-ci>Continuous integration: GitHub Actions / GitLab CI</h2><p>You probably want to run the tests and linter on every code push.</p><p><strong>GitHub Actions</strong>: <code>.github/workflows/lint-and-test.yml</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#66d9ef>name</span>: Lint and test

<span style=color:#66d9ef>on</span>: [push]

<span style=color:#66d9ef>jobs</span>:
  <span style=color:#66d9ef>lint_and_test</span>:
    <span style=color:#66d9ef>runs-on</span>: ubuntu-latest
    <span style=color:#66d9ef>strategy</span>:
      <span style=color:#66d9ef>matrix</span>:
        <span style=color:#66d9ef>nodejs</span>: [<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>14</span>]

    <span style=color:#66d9ef>steps</span>:
    - <span style=color:#66d9ef>uses</span>: actions/checkout@v2

    <span style=color:#75715e># https://github.com/actions/setup-node</span>
    - <span style=color:#66d9ef>uses</span>: actions/setup-node@v2-beta
      <span style=color:#66d9ef>with</span>:
        <span style=color:#66d9ef>node-version</span>: ${{ matrix.nodejs }}

    - <span style=color:#66d9ef>run</span>: yarn install
    - <span style=color:#66d9ef>run</span>: yarn lint
    - <span style=color:#66d9ef>run</span>: yarn test
    - <span style=color:#66d9ef>run</span>: yarn build
</code></pre></div><p><strong>GitLab CI</strong>: <code>.gitlab-ci.yml</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#66d9ef>image</span>: node:<span style=color:#ae81ff>12</span>

<span style=color:#66d9ef>cache</span>:
  <span style=color:#66d9ef>paths</span>:
    - node_modules/

<span style=color:#66d9ef>stages</span>:
  - test

<span style=color:#66d9ef>lint-and-test</span>:
  <span style=color:#66d9ef>stage</span>: test
  <span style=color:#66d9ef>script</span>:
    - yarn install
    - yarn build
    - yarn test
    - yarn lint
</code></pre></div><hr><h2 id=api-documentation-with-typedoc>API documentation with typedoc</h2><p>You can auto-generate API documentation from the TyoeScript source files using <a href=https://typedoc.org/guides/doccomments/>typedoc</a>. The generated documentation can be published to GitHub / GitLab pages through the CI:</p><ul><li>Install <a href=https://typedoc.org/guides/doccomments/>typedoc</a>: <code>yarn add -D typedoc</code></li><li>Add <code>docs</code> script to <code>package.json</code>: <code>"docs": "typedoc --entryPoints src/main.ts"</code></li><li>You can now generate the documentation with <code>yarn docs</code>. The resulting HTML is saved in <code>docs/</code>.</li><li>Publish to pages through CI:<ul><li><a href=https://pages.github.com/>GitHub pages</a>: Add <a href=https://github.com/metachris/typescript-nodejs-boilerplate/blob/master/.github/workflows/deploy-gh-pages.yml><code>.github/workflows/deploy-gh-pages.yml</code></a> and enable pages in GitHub repo settings</li><li><a href=https://docs.gitlab.com/ee/user/project/pages/>GitLab pages</a>: add a deploy task in <a href=https://github.com/metachris/typescript-nodejs-boilerplate/blob/master/.gitlab-ci.yml#L19:L30><code>.gitlab-ci.yml</code></a></li></ul></li></ul><hr><h2 id=esbuild>esbuild</h2><p><a href=https://esbuild.github.io/>esbuild</a> is an extremely fast JavaScript bundler that
can also compile a <a href=https://esbuild.github.io/content-types/#typescript>large subset of TypeScript code</a>. It&rsquo;s typically used as a webpack alternative, although it can also be used for many Node.js projects.</p><p>Note that esbuild is still young and under active development (see <a href=https://github.com/evanw/esbuild>esbuild on GitHub</a>).</p><p>Install esbuild, compile and bundle:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Install esbuild</span>
yarn add -D esbuild

<span style=color:#75715e># Compile and bundle (prints to stdout)</span>
./node_modules/.bin/esbuild src/main.ts --bundle --platform<span style=color:#f92672>=</span>node --outfile<span style=color:#f92672>=</span>dist/out.js

<span style=color:#75715e># Run the bundled output</span>
node dist/out.js
</code></pre></div><p>Further reading:</p><ul><li><a href=https://esbuild.github.io/>esbuild documentation</a></li></ul><hr><h2 id=references--documentation>References & documentation</h2><ul><li><strong><a href=https://github.com/metachris/typescript-nodejs-boilerplate>Example repository</a></strong></li><li><a href=https://www.typescriptlang.org/docs/handbook/intro.html>TypeScript Handbook</a></li><li><a href=https://esbuild.github.io/>esbuild docs</a></li><li><a href=https://www.typescriptlang.org/tsconfig>tsconfig docs</a></li><li><a href=https://github.com/typescript-eslint/typescript-eslint/blob/master/docs/getting-started/linting/README.md>typescript-eslint docs</a></li><li><a href=https://jestjs.io/docs/getting-started>Jest docs</a></li><li><a href=https://docs.github.com/en/actions>GitHub Actions</a>, <a href=https://docs.gitlab.com/ee/ci/>GitLab CI</a></li></ul><p>Reach out with feedback and ideas:</p><ul><li><a href=https://twitter.com/metachris>twitter.com/metachris</a></li><li><a href=https://github.com/metachris/typescript-nodejs-boilerplate/issues>github.com/metachris/typescript-nodejs-boilerplate/issues</a></li></ul></div><footer><script src=https://utteranc.es/client.js repo=metachris/metachris.com-comments issue-term=og:title theme=preferred-color-scheme crossorigin=anonymous async></script></footer></article></section></div><footer class=footer><section class=container></section></footer></main><script src=https://www.metachris.com/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-168016633-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-168016633-1');</script><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.11.2/css/all.css integrity=sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN crossorigin=anonymous></body></html>