<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Chris Hager"><meta name=description content="How to automate building and deployment of Hugo websites to GitHub Pages using Travis CI, triggered by pushing to the Git repository."><meta name=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.metachris.com/images/profile2-round.png"><meta name=twitter:title content="Continuous Deployment: Hugo + Travis CI → GitHub Pages"><meta name=twitter:description content="How to automate building and deployment of Hugo websites to GitHub Pages using Travis CI, triggered by pushing to the Git repository."><meta property="og:title" content="Continuous Deployment: Hugo + Travis CI → GitHub Pages"><meta property="og:description" content="How to automate building and deployment of Hugo websites to GitHub Pages using Travis CI, triggered by pushing to the Git repository."><meta property="og:type" content="article"><meta property="og:url" content="https://www.metachris.com/2017/04/continuous-deployment-hugo--travis-ci-github-pages/"><meta property="og:image" content="https://www.metachris.com/images/profile2-round.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-04-25T00:00:00+00:00"><meta property="article:modified_time" content="2017-04-25T00:00:00+00:00"><base href=https://www.metachris.com/2017/04/continuous-deployment-hugo--travis-ci-github-pages/><title>Continuous Deployment: Hugo + Travis CI → GitHub Pages · Chris Hager
</title><link rel=canonical href=https://www.metachris.com/2017/04/continuous-deployment-hugo--travis-ci-github-pages/><link rel=stylesheet href=https://www.metachris.com/css/normalize.min.css><link rel=stylesheet href=https://www.metachris.com/css/coder.min.8f72df10bce2639a67ebb13592ac9ecec6e8c95e4c357c00b10942781cc9645f.css integrity="sha256-j3LfELziY5pn67E1kqyezsboyV5MNXwAsQlCeBzJZF8=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://www.metachris.com/css/coder-dark.min.555a1ef52d640ac2e953517fb98e13f034f07996d15b0efd41f0c2cb15932293.css integrity="sha256-VVoe9S1kCsLpU1F/uY4T8DTweZbRWw79QfDCyxWTIpM=" crossorigin=anonymous media=screen><script src=https://www.metachris.com/js/custom.js></script><link rel=stylesheet href=https://www.metachris.com/scss/custom.min.cb9c4606b9be622199aa8417d7f3dfd1ac7e57608abddfed77050a2f05f990c3.css integrity="sha256-y5xGBrm+YiGZqoQX1/Pf0ax+V2CKvd/tdwUKLwX5kMM=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://www.metachris.com/images/favicon-32px.png sizes=32x32><link rel=icon type=image/png href=https://www.metachris.com/images/favicon-16px.png sizes=16x16><link rel=alternate type=application/rss+xml href=https://www.metachris.comindex.xml title="Site Title"></head><body class=colorscheme-auto><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://www.metachris.com/>Chris Hager
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars"></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://www.metachris.com/about/>About</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.com/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.com/projects/>Projects</a></li><li class=navigation-item><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw"></i></a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>Continuous Deployment: Hugo + Travis CI → GitHub Pages</h1></div><div class=post-meta><div class=date><span class=posted-on><time datetime=2017-04-25T00:00:00Z>April 2017</time></span></div></div></header><div class=single-content><p>This post shows how to automate building and deployment of <a href=https://gohugo.io/>Hugo</a> static websites to GitHub Pages using <a href=https://travis-ci.org/>Travis CI</a>. Builds are automatically triggered when pushing to the Git repository, and deployment when a build on the master branch succeeds.</p><center><img src=https://www.metachris.com/images/posts/hugo-travis/header-image.jpg style=max-height:120px alt="Logos: Hugo, Travis, GitHub"></center><p><a href=https://gohugo.io/>Hugo</a> is a static website generator written in Go, and only requires a single binary. The easiest way to run Hugo in the Travis CI container is by including the specific hugo binary with which to build the site as part of the repository (eg. in the directory <code>/binaries</code>). This way you don&rsquo;t need to download the Hugo release on each build job, which may take several minutes. You can get the latest binary from the <a href=https://github.com/spf13/hugo/releases>Hugo releases page</a> (use the <code>hugo_&lt;VERSION>_Linux-64bit.tar.gz</code> file and include only the <code>hugo</code> binary).</p><p>For syntax highlighting, you also need <a href=http://pygments.org/>Pygments</a> installed. In the <code>.travis.yml</code> file this is done by specifiying the <code>python-pygments</code> package as <a href=https://docs.travis-ci.com/user/installing-dependencies/#Installing-Packages-with-the-APT-Addon>apt addon</a>.</p><h3 id=configuring-travis-ci>Configuring Travis CI</h3><p>On the Travis CI homepage on your <a href=https://travis-ci.org/profile>profile page</a> you need to enable the GitHub repository you want to build.</p><p>Travis CI also needs write-access to the GitHub repository, to be able to update the <code>gh-pages</code> branch. For this we provide a GitHub token environment variable named <code>GITHUB_TOKEN</code> in this example. Environment variables can be specified on the Travis CI website in the repository settings (see the <a href=https://docs.travis-ci.com/user/environment-variables/#Defining-Variables-in-Repository-Settings>Travis environment variables docs</a>). You can generate this token in your GitHub account settings under &ldquo;<a href=https://github.com/settings/tokens/new>Personal access tokens
-> Generate new token</a>&rdquo; (ensure that the &ldquo;repo&rdquo; checkbox is enabled).</p><hr class=spaced><p>For a content layout <a href=https://github.com/Ghoust-game/website>like here</a> (Hugo content in <code>/src/</code>, theme name <code>ghoust</code>, Hugo binary in <code>/binaries/hugo</code>), this is the complete <code>.travis.yml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># Install the apt prerequisites</span>
</span></span><span style=display:flex><span><span style=color:#f92672>addons</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>apt</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>packages</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>python-pygments</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Clean and don&#39;t fail</span>
</span></span><span style=display:flex><span><span style=color:#f92672>install</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>rm -rf public || exit 0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Build the website</span>
</span></span><span style=display:flex><span><span style=color:#f92672>script</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>cd src</span>
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>../binaries/hugo --theme=ghoust</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Deploy to GitHub pages</span>
</span></span><span style=display:flex><span><span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>provider</span>: <span style=color:#ae81ff>pages</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>skip_cleanup</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>local_dir</span>: <span style=color:#ae81ff>public</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>$GITHUB_TOKEN</span> <span style=color:#75715e># Set in travis-ci.org dashboard</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branch</span>: <span style=color:#ae81ff>master</span></span></span></code></pre></div><hr class=spaced><p>References:</p><ul><li><a href=https://pages.github.com/>GitHub Pages</a></li><li><a href=https://docs.travis-ci.com/user/deployment/pages/>Travis CI Documentation: GitHub Pages Deployment</a></li><li><a href=https://docs.travis-ci.com/user/environment-variables/#Defining-Variables-in-Repository-Settings>Travis environment variables docs</a></li><li><a href=https://github.com/Ghoust-game/website>Repostiory for a demo Hugo website</a></li></ul><hr class=spaced><p><b>Update 2017-04-26</b>: Several people suggested to use <a href=https://www.netlify.com/>Netlify</a> for hosting the pages instead of GitHub Pages. Netlify has great continuous deployment integration, free SSL certificates, custom redirects, form handling and more.</p><hr class=spaced><p>Let me know if you have any feedback and/or ideas via <a href=https://twitter.com/@metachris>@metachris</a>.</p></div><hr><div style=height:14px></div><div style=float:right></div><div style=clear:both></div><div class=bottomAbout style=display:flex><div style=flex-grow:2><script async src=https://platform.twitter.com/widgets.js></script><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-show-count=false>Tweet</a><br><a href="https://twitter.com/metachris?ref_src=twsrc%5Etfw" class=twitter-follow-button data-show-count=false>Follow @metachris</a></div><div style=margin-top:0><a href=https://twitter.com/metachris><img src=https://www.metachris.com/images/profile2-round.png alt=Chris class=profile style=max-width:60px></a></div></div><hr><div class=bottom-post-links><div class=prev><span class=title>OLDER POST</span><br><a href=https://www.metachris.com/2017/04/kubecon-europe-2017-impressions/>KubeCon Europe 2017 Impressions</a></div><div class=next><span class=title>NEWER POST</span><br><a href=https://www.metachris.com/2017/05/how-to-test-vue.js-plugins-and-extensions/>How to test Vue.js plugins and extensions</a></div></div><footer><a id=comments></a><script src=https://utteranc.es/client.js repo=metachris/metachris.com-comments issue-term=og:title theme=preferred-color-scheme crossorigin=anonymous async></script></footer></article></section></div><footer class=footer><section class=container></section></footer></main><script src=https://www.metachris.com/js/dark-mode.min.c2d8a1f8f2660e4a46d776277c72695a1e0ca65939d79f754441d47551604af5.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-168016633-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-168016633-1")</script><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.11.2/css/all.css integrity=sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN crossorigin=anonymous></body></html>